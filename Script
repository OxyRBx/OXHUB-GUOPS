-- AUTO-RELOADING GHOST_TOWN FINDER + SERVER HOP
-- Works like Infinite Yield (script runs again after hop)

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local lp = Players.LocalPlayer

local TARGET_NAME = "Ghost_Town"
local PLACE_ID = game.PlaceId

-- Recursive search
local function findFolderRecursive(parent)
    for _, child in ipairs(parent:GetChildren()) do
        if child.Name == TARGET_NAME then
            return child
        end
        local found = findFolderRecursive(child)
        if found then return found end
    end
    return nil
end

local function searchForGhostTown()
    return findFolderRecursive(game.Workspace)
end

-- Server hop
local function serverHop()
    print("Ghost_Town not found â†’ Hopping server...")

    local data = HttpService:JSONDecode(
        game:HttpGet("https://games.roblox.com/v1/games/" .. PLACE_ID .. "/servers/Public?sortOrder=Asc&limit=100")
    )

    for _, server in ipairs(data.data) do
        if server.playing < server.maxPlayers then
            TeleportService:TeleportToPlaceInstance(PLACE_ID, server.id, lp)
            return
        end
    end

    -- fallback random
    TeleportService:Teleport(PLACE_ID, lp)
end

-- Re-run script after teleport (important!)
lp.OnTeleport:Connect(function(State)
    if State == Enum.PlayerActions.CharacterSpawned then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/yourrawscripturl/script.lua"))()
    end
end)

-------------------------------------------------------
-- MAIN LOOP (auto reload like IY)
-------------------------------------------------------

while task.wait(3) do
    local found = searchForGhostTown()

    if found then
        print("FOUND â†’", found:GetFullName())
        break
    else
        serverHop()
        break -- break loop and teleport
    end
end
label.Text = "OXHUB"
label.TextColor3 = Color3.fromRGB(255, 255, 255)
label.TextSize = 14
label.BackgroundTransparency = 1
label.Font = Enum.Font.GothamBold
label.TextXAlignment = Enum.TextXAlignment.Left

local xBtn = Instance.new("TextButton")
xBtn.Size = UDim2.new(0, 20, 0, 30)
xBtn.Position = UDim2.new(1, -25, 0, 5)
xBtn.Text = "X"
xBtn.BackgroundColor3 = Color3.fromRGB(40, 0, 0)
xBtn.BackgroundTransparency = 1
xBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
xBtn.Font = Enum.Font.GothamBold
xBtn.TextSize = 14
xBtn.BorderSizePixel = 0
xBtn.Parent = panel
Instance.new("UICorner", xBtn).CornerRadius = UDim.new(0, 6)

local minBtn = Instance.new("TextButton")
minBtn.Size = UDim2.new(0, 20, 0, 30)
minBtn.Position = UDim2.new(1, -40, 0, 5)
minBtn.Text = "-"
minBtn.BackgroundColor3 = Color3.fromRGB(40, 0, 0)
minBtn.BackgroundTransparency = 1
minBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
minBtn.Font = Enum.Font.GothamBold
minBtn.TextSize = 16
minBtn.BorderSizePixel = 0
minBtn.Parent = panel
Instance.new("UICorner", minBtn).CornerRadius = UDim.new(0, 6)

local miniCircle = Instance.new("TextButton")
miniCircle.Name = "MiniCircle"
miniCircle.Size = UDim2.new(0, 40, 0, 40)
miniCircle.Position = UDim2.new(0.5, 0, 0, 10)
miniCircle.AnchorPoint = Vector2.new(0.5, 0)
miniCircle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
miniCircle.BackgroundTransparency = 0.5
miniCircle.Text = "O"
miniCircle.TextColor3 = Color3.fromRGB(255, 255, 255)
miniCircle.TextSize = 20
miniCircle.Font = Enum.Font.GothamBold
miniCircle.Visible = false
miniCircle.Active = true
miniCircle.Draggable = true
miniCircle.Parent = screenGui
Instance.new("UICorner", miniCircle).CornerRadius = UDim.new(1, 0)

xBtn.MouseButton1Click:Connect(function()
	panel.Visible = false
end)

minBtn.MouseButton1Click:Connect(function()
	panel.Visible = false
	miniCircle.Visible = true
end)

miniCircle.MouseButton1Click:Connect(function()
	panel.Visible = true
	miniCircle.Visible = false
end)

local buttonColors = {
	Color3.fromRGB(35, 35, 35),
	Color3.fromRGB(30, 30, 30),
	Color3.fromRGB(25, 25, 25),
}

local buttonTexts = {
	"Slap Toggle",
	"Kick Toggle",
	"Stomp Toggle",
}

for i = 1, 3 do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0.8, 0, 0, 25)
	btn.Position = UDim2.new(0.1, 0, 0, 40 + (i - 1) * 30)
	btn.BackgroundColor3 = buttonColors[i]
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Text = buttonTexts[i]
	btn.Font = Enum.Font.GothamSemibold
	btn.TextSize = 10
	btn.Parent = panel
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

	-- connect button scripts
	if i == 1 then
		btn.MouseButton1Click:Connect(function()
			if _G.slapAura then
				_G.slapAura = false
				game.StarterGui:SetCore("SendNotification", {
					Title = "Slap Aura",
					Text = "ðŸ”´ Disabled",
					Duration = 3
				})
				return
			end
			_G.slapAura = true
			game.StarterGui:SetCore("SendNotification", {
				Title = "Slap Aura",
				Text = "ðŸŸ¢ Enabled",
				Duration = 3
			})
			local plr = game.Players.LocalPlayer
			local chr = plr.Character or plr.CharacterAdded:Wait()
			local hrp = chr:WaitForChild("HumanoidRootPart")
			local fightEvent = chr:WaitForChild("Fight"):WaitForChild("FightScript"):WaitForChild("FightEvent")
			local args = {"Slap"}
			local range = 25
			local hitPartName = "Head"
			task.spawn(function()
				while _G.slapAura do
					task.wait(0.05)
					fightEvent:FireServer(unpack(args))
					for _, enemy in pairs(game.Players:GetPlayers()) do
						if enemy ~= plr and enemy.Character and enemy.Character:FindFirstChild(hitPartName) then
							local part = enemy.Character[hitPartName]
							if (part.Position - hrp.Position).Magnitude <= range then
								for _, myPart in pairs(chr:GetChildren()) do
									if myPart:IsA("BasePart") then
										firetouchinterest(myPart, part, 0)
										firetouchinterest(myPart, part, 1)
									end
								end
							end
						end
					end
				end
			end)
		end)
	elseif i == 2 then
		btn.MouseButton1Click:Connect(function()
			if _G.kickAura then
				_G.kickAura = false
				game.StarterGui:SetCore("SendNotification", {
					Title = "Kick Aura",
					Text = "ðŸ”´ Disabled",
					Duration = 3
				})
				return
			end
			_G.kickAura = true
			game.StarterGui:SetCore("SendNotification", {
				Title = "Kick Aura",
				Text = "ðŸŸ¢ Enabled",
				Duration = 3
			})
			local plr = game.Players.LocalPlayer
			local chr = plr.Character or plr.CharacterAdded:Wait()
			local hrp = chr:WaitForChild("HumanoidRootPart")
			local fightEvent = chr:WaitForChild("Fight"):WaitForChild("FightScript"):WaitForChild("FightEvent")
			local args = {"Kick"}
			local range = 25
			local hitPartName = "Head"
			task.spawn(function()
				while _G.kickAura do
					task.wait(0.05)
					fightEvent:FireServer(unpack(args))
					for _, enemy in pairs(game.Players:GetPlayers()) do
						if enemy ~= plr and enemy.Character and enemy.Character:FindFirstChild(hitPartName) then
							local part = enemy.Character[hitPartName]
							if (part.Position - hrp.Position).Magnitude <= range then
								for _, myPart in pairs(chr:GetChildren()) do
									if myPart:IsA("BasePart") then
										firetouchinterest(myPart, part, 0)
										firetouchinterest(myPart, part, 1)
									end
								end
							end
						end
					end
				end
			end)
		end)
	elseif i == 3 then
		btn.MouseButton1Click:Connect(function()
			if _G.stompAura then
				_G.stompAura = false
				game.StarterGui:SetCore("SendNotification", {
					Title = "Stomp Aura",
					Text = "ðŸ”´ Disabled",
					Duration = 3
				})
				return
			end
			_G.stompAura = true
			game.StarterGui:SetCore("SendNotification", {
				Title = "Stomp Aura",
				Text = "ðŸŸ¢ Enabled",
				Duration = 3
			})
			local plr = game.Players.LocalPlayer
			local chr = plr.Character or plr.CharacterAdded:Wait()
			local hrp = chr:WaitForChild("HumanoidRootPart")
			local fightEvent = chr:WaitForChild("Fight"):WaitForChild("FightScript"):WaitForChild("FightEvent")
			local args = {"Stomp"}
			local range = 25
			local hitPartName = "Head"
			task.spawn(function()
				while _G.stompAura do
					task.wait(0.05)
					fightEvent:FireServer(unpack(args))
					for _, enemy in pairs(game.Players:GetPlayers()) do
						if enemy ~= plr and enemy.Character and enemy.Character:FindFirstChild(hitPartName) then
							local part = enemy.Character[hitPartName]
							if (part.Position - hrp.Position).Magnitude <= range then
								for _, myPart in pairs(chr:GetChildren()) do
									if myPart:IsA("BasePart") then
										firetouchinterest(myPart, part, 0)
										firetouchinterest(myPart, part, 1)
									end
								end
							end
						end
					end
				end
			end)
		end)
	end
end
